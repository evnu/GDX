<h1>Search</h1>
<p>
  Search/Filter uploaded data sets by tags. Insert the tags you want to use in the following 
  input field and separate them either by , or a whitespace.
</p>
<%= form_tag uploads_path, :method => "get" do %>
  <%= label_tag :keywords %>
  <%= text_field_with_auto_complete :keywords, :taglist, { :size => 15 }, { :url => "tags/index.js", :method => :get, :param_name => 'tag',
                                                                            :tokens => [","," "]} %>
  <%= submit_tag "Search", :name => nil %>
<% end %>
<h1>Listing uploads</h1>

<% if not @uploads.empty? %>

  <table>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Tags</th>
      <th>File</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>

    <% @uploads.each do |upload| %>
      <tr>
        <td><%= upload.name %></td>
        <td><%= upload.description %></td>
        <td><%= upload.tag_list %></td>
        <td><%= link_to upload.name, upload.file.url %></td>
        <td><%= link_to 'Show', upload %></td>
        <td><%= link_to 'Edit', edit_upload_path(upload) %></td>
        <td><%= link_to 'Destroy', upload, :confirm => 'Are you sure?', :method => :delete %></td>
      </tr>
    <% end %>
  </table>
<% end %>

<%= link_to 'New Upload', new_upload_path %>
